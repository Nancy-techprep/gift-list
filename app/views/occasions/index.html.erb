<div>
  <div>
    <h1>
      List of all occasions
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>
      Add a new occasion
    </h2>

    <form action="/insert_occasion" method="post">
      <div>
        <label for="user_id_box">
        <%= @current_user.username %>
        </label>

        <input type="hidden" id="user_id_box" name="query_user_id" value="<%= @current_user.username %>">
      </div>

       <div>
       <label for="loved_one_name_box">
          Loved one name
        </label>

         <% @list_of_loved_ones.each do |loves| %>
        <select id="name_box" name="query_name">
            <option value="<%=loves.id%>"><%=loves.name%></option>
        </select>
        <% end %>
      <div>

       
        <label for="name_box">
          Occasion name
        </label>

        <select id="occasion_name_box" name="query_occasion_name">
          <option value="birthday">Birthday</option>
          <option value="anniversary">Anniversary</option>
          <option value="christmas">Christmas</option>
          <option value="mothers_day">Mother's Day</option>
          <option value="fathers_day">Father's Day</option>
          <option value="wedding">Wedding</option>
          <option value="baptism">Baptism</option>
          <option value="graduation">Graduation</option>
          <option value="valentines_day">Valentines Day</option>
          <option value="other">Other</option>
        </select>
      </div>

      <div>
        <label for="date_box">
          Date
        </label>

        <input type="date" id="date_box" name="query_date">
      </div>

      <div>
        <label for="gifts_count_box">
          Gifts count
        </label>

        <input type="text" id="gifts_count_box" name="query_gifts_count">
      </div>

      <button>
        Create occasion
      </button>
    </form>
  </div>
</div>

<hr>
<div>
  <div>
    <table border="1">
      <tr>

        <th>
          User
        </th>

        <th>
          Loved one
        </th>

        <th>
          Occasion
        </th>

        <th>
          Date
        </th>

        <th>
          Gifts count
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_occasions.each do |an_occasion| %>
      <tr>

        <td>
          <%= an_occasion.user.username %>
        </td>

        <td>
          <%= an_occasion.loved_one.name %>
        </td>

        <td>
          <%= an_occasion.name %>
        </td>

        <td>
          <%= an_occasion.date %>
        </td>

        <td>
          <%= an_occasion.gifts_count %>
        </td>

        <td>
          <%= time_ago_in_words(an_occasion.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(an_occasion.updated_at) %> ago
        </td>

        <td>
          <a href="/occasions/<%= an_occasion.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
