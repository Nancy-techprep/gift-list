<div>
  <div>
    <h1>
      List of all occasions
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>
      Add a new occasion
    </h2>

    <form action="/insert_occasion" method="post">
      <div>
        <label for="user_id_box">
        <%= @current_user.username %>
        </label>

        <input type="hidden" id="user_id_box" name="query_user_id" value="<%= @current_user.username %>">
        
      </div>
       <div>
       <label for="loved_one_name_box">
          Loved one name
        </label>

      <div>
        <select id="name_box" name="query_name">
          <% @list_of_loved_ones.each do |love| %>
            <option value="<%= love.name %>"><%= love.name %></option>
          <% end %>
        </select>
      </div>
      
      <div>
        <% @list_of_loved_ones.each do |love| %>
          <input name="query_loved_one_id" type="hidden" value="<%= love.id %>">
        <% end %>
      </div>

      <div> 

       
        <label for="name_box">
          Occasion name
        </label>

        <select id="occasion_name_box" name="query_occasion_name">
          <option>Birthday</option>
          <option>Anniversary</option>
          <option>Christmas</option>
          <option>Mother's Day</option>
          <option>Father's Day</option>
          <option>Wedding</option>
          <option>Baptism</option>
          <option>Graduation</option>
          <option>Valentines Day</option>
          <option>Other</option>
        </select>
      </div>

      <div>
        <label for="date_box">
          Date
        </label>

        <input type="date" id="date_box" name="query_date">
      </div>

      <!-- <div>
        <label for="gifts_count_box">
          Gifts count
        </label>

        <input type="text" id="gifts_count_box" name="query_gifts_count">
      </div> !-->

      <button>
        Create occasion
      </button>
    </form>
  </div>
</div>

<hr>
<div>
  <div>
    <table border="1">
      <tr>

        <th>
          User
        </th>

        <th>
          Loved one
        </th>

        <th>
          Occasion
        </th>

        <th>
          Date
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_occasions.each do |an_occasion| %>
      <tr>

        <td>
          <%= an_occasion.user.username %>
        </td>

        <td>
          <%= an_occasion.loved_one.name %>
        </td>

        <td>
          <%= an_occasion.name %>
        </td>

        <td>
          <%= an_occasion.date %>
        </td>

       <!--  <td>
          <%= an_occasion.gifts_count %>
        </td> !-->

        <td>
          <%= time_ago_in_words(an_occasion.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(an_occasion.updated_at) %> ago
        </td>

        <td>
          <a href="/occasions/<%= an_occasion.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
